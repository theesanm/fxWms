(()=>{var e={};e.id=4834,e.ids=[4834],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},15028:(e,t,a)=>{Promise.resolve().then(a.bind(a,66887))},15079:(e,t,a)=>{"use strict";a.d(t,{bq:()=>p,eb:()=>x,gC:()=>u,l6:()=>c,s3:()=>l,yv:()=>m});var r=a(60687),s=a(43210),i=a(91413),o=a(78272),n=a(13964),d=a(4780);let c=i.bL,l=i.YJ,p=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(i.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:[t,(0,r.jsx)(o.A,{className:"h-4 w-4 opacity-50"})]}));p.displayName=i.l9.displayName;let u=s.forwardRef(({className:e,children:t,position:a="popper",...s},o)=>(0,r.jsx)(i.ZL,{children:(0,r.jsx)(i.UC,{ref:o,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:(0,r.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));u.displayName=i.UC.displayName;let x=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(i.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm text-gray-900 outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})}),(0,r.jsx)(i.p4,{children:t})]}));x.displayName=i.q7.displayName;let m=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsx)(i.WT,{ref:s,className:(0,d.cn)("text-sm text-gray-900",e),...a,children:t}));m.displayName=i.WT.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},50981:(e,t,a)=>{"use strict";a.d(t,{default:()=>h});var r=a(60687),s=a(43210),i=a(27605),o=a(63442),n=a(45880),d=a(29523),c=a(89667),l=a(15079),p=a(52581),u=a(80310),x=a(76011);let m=n.Ik({zone_id:n.Yj().min(1,"Zone is required"),location_code:n.Yj().min(1,"Location code is required"),capacity:n.Yj().min(1,"Capacity is required")});function h(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[h,y]=(0,s.useState)(null),[g,f]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),{register:v,handleSubmit:w,reset:N,setValue:k,watch:_,setError:z,formState:{errors:q}}=(0,i.mN)({resolver:(0,o.u)(m)}),C=async()=>{try{let[e,a]=await Promise.all([u.N.getLocations(),x.U.getZones()]);t(e),n(a)}catch(e){console.error("Error loading data:",e),p.oR.error("Failed to load data")}},L=async e=>{f(!0);try{let t={...e,zone_id:parseInt(e.zone_id),capacity:parseInt(e.capacity)};h?(await u.N.updateLocation(h.location_id,t),p.oR.success("Location updated successfully")):(await u.N.createLocation(t),p.oR.success("Location created successfully")),C(),N(),y(null)}catch(e){"DuplicateError"===e.name?(p.oR.error("Duplicate Location",{description:"This location code is already used in the selected zone"}),z("zone_id",{type:"manual",message:"This combination of zone and location code already exists"}),z("location_code",{type:"manual",message:"This combination of zone and location code already exists"})):p.oR.error("Failed to save location",{description:e.message||"An unexpected error occurred"})}finally{f(!1)}},P=e=>{y(e),k("zone_id",e.zone_id.toString()),k("location_code",e.location_code),k("capacity",e.capacity.toString())},R=async e=>{if(confirm("Are you sure you want to delete this location?"))try{await u.N.deleteLocation(e),p.oR.success("Location deleted successfully"),C()}catch(e){console.error("Error deleting location:",e),p.oR.error("Failed to delete location")}},S=e=>{let t=a.find(t=>t.zone_id===e);return t?t.zone_name:"Unknown Zone"},E=e.filter(e=>e.location_code.toLowerCase().includes(b.toLowerCase())||S(e.zone_id).toLowerCase().includes(b.toLowerCase()));return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("form",{onSubmit:w(L),className:"space-y-4 bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:h?"Edit Location":"Create New Location"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Zone"}),(0,r.jsxs)(l.l6,{onValueChange:e=>k("zone_id",e),value:_("zone_id"),children:[(0,r.jsx)(l.bq,{className:"w-full dark:bg-gray-700 dark:border-gray-600",children:(0,r.jsx)(l.yv,{placeholder:"Select Zone",className:"dark:text-gray-200"})}),(0,r.jsx)(l.gC,{className:"dark:bg-gray-800 dark:border-gray-700",children:a.map(e=>(0,r.jsx)(l.eb,{value:e.zone_id.toString(),className:"dark:text-gray-200 dark:focus:bg-gray-700",children:e.zone_name},e.zone_id))})]}),q.zone_id&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:q.zone_id.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location Code"}),(0,r.jsx)(c.p,{placeholder:"Enter location code",...v("location_code"),className:"bg-white dark:bg-gray-700 dark:border-gray-600"}),q.location_code&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:q.location_code.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Capacity"}),(0,r.jsx)(c.p,{type:"number",placeholder:"Enter capacity",...v("capacity"),className:"bg-white dark:bg-gray-700 dark:border-gray-600"}),q.capacity&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:q.capacity.message})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,r.jsx)(d.$,{type:"submit",disabled:g,className:"bg-primary hover:bg-primary-dark",children:g?"Saving...":h?"Update Location":"Create Location"}),h&&(0,r.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>{N(),y(null)},className:"dark:border-gray-600",children:"Cancel"})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Locations"}),(0,r.jsx)("div",{className:"w-64",children:(0,r.jsx)(c.p,{placeholder:"Search locations...",value:b,onChange:e=>j(e.target.value),className:"bg-white dark:bg-gray-700 dark:border-gray-600"})})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 text-gray-900 dark:text-gray-100",children:"Location Code"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-gray-900 dark:text-gray-100",children:"Zone"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-gray-900 dark:text-gray-100",children:"Capacity"}),(0,r.jsx)("th",{className:"text-right py-3 px-4 text-gray-900 dark:text-gray-100",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:E.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("td",{className:"py-3 px-4 text-gray-900 dark:text-gray-100",children:e.location_code}),(0,r.jsx)("td",{className:"py-3 px-4 text-gray-900 dark:text-gray-100",children:S(e.zone_id)}),(0,r.jsx)("td",{className:"py-3 px-4 text-gray-900 dark:text-gray-100",children:e.capacity}),(0,r.jsx)("td",{className:"py-3 px-4 text-right",children:(0,r.jsxs)("div",{className:"space-x-2",children:[(0,r.jsx)(d.$,{onClick:()=>P(e),variant:"outline",size:"sm",className:"dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700",children:"Edit"}),(0,r.jsx)(d.$,{onClick:()=>R(e.location_id),variant:"danger",size:"sm",children:"Delete"})]})})]},e.location_id))})]})})]})]})}},51412:(e,t,a)=>{Promise.resolve().then(a.bind(a,50981))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66887:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\fxWMS\\\\React\\\\admin-portal\\\\src\\\\components\\\\location\\\\location-manager.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\fxWMS\\React\\admin-portal\\src\\components\\location\\location-manager.tsx","default")},70440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},74075:e=>{"use strict";e.exports=require("zlib")},76011:(e,t,a)=>{"use strict";a.d(t,{U:()=>s});var r=a(81288);class s extends r.d{static{this.endpoint="/zones"}static async getZones(){return(await this.get(this.endpoint)).data}static async getZonesByWarehouse(e){let t=this.buildFilter("warehouse_id","eq",e);return(await this.get(`${this.endpoint}?${t}`)).data}static async createZone(e){return(await this.post(this.endpoint,e)).data}static async updateZone(e,t){let a=this.buildFilter("zone_id","eq",e);return(await this.patch(`${this.endpoint}?${a}`,t)).data}static async deleteZone(e){let t=this.buildFilter("zone_id","eq",e);return this.delete(`${this.endpoint}?${t}`)}}},79551:e=>{"use strict";e.exports=require("url")},80310:(e,t,a)=>{"use strict";a.d(t,{N:()=>s});var r=a(81288);class s extends r.d{static{this.endpoint="/locations"}static async getLocations(){try{return(await this.get(this.endpoint)).data}catch(e){throw console.error("Error fetching locations:",e),e}}static async updateLocation(e,t){try{let a=this.buildFilter("location_id","eq",e);return(await this.patch(`${this.endpoint}?${a}`,t)).data}catch(e){throw console.error("Error updating location:",e),e}}static async createLocation(e){try{return(await this.post(this.endpoint,e)).data}catch(e){if(409===e.status||e.data?.code==="23505"||e.data?.message?.includes("duplicate key value")){let e=Error("A location with this code already exists in the selected zone");throw e.name="DuplicateError",e}throw console.error("Unexpected error creating location:",{message:e.message,status:e.status,data:e.data}),Error("Failed to create location")}}static async deleteLocation(e){let t=this.buildFilter("location_id","eq",e);return this.delete(`${this.endpoint}?${t}`)}}},81248:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>l,routeModule:()=>u,tree:()=>c});var r=a(65239),s=a(48088),i=a(88170),o=a.n(i),n=a(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let c={children:["",{children:["location",{children:["manage",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,98316)),"C:\\Projects\\fxWMS\\React\\admin-portal\\src\\app\\location\\manage\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"C:\\Projects\\fxWMS\\React\\admin-portal\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["C:\\Projects\\fxWMS\\React\\admin-portal\\src\\app\\location\\manage\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/location/manage/page",pathname:"/location/manage",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},81288:(e,t,a)=>{"use strict";a.d(t,{d:()=>s});var r=a(94e3);class s{static async get(e){return r.A.get(e)}static async post(e,t){try{return await r.A.post(e,t)}catch(t){throw 409!==t.status&&console.error(`Error in POST request to ${e}:`,t),t}}static async patch(e,t){return r.A.patch(e,t)}static async delete(e){return r.A.delete(e)}static buildFilter(e,t,a){return`${e}=${t}.${a}`}}},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},89667:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(60687);let s=a(43210).forwardRef(({...e},t)=>(0,r.jsx)("input",{ref:t,...e}));s.displayName="Input"},94735:e=>{"use strict";e.exports=require("events")},98316:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(37413),s=a(66887);function i(){return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Location Management"})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,r.jsx)(s.default,{})})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[4447,8273,1658,7605,2095,2105,5668,8263],()=>a(81248));module.exports=r})();