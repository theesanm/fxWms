(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9318],{14636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>o,Wv:()=>d,hl:()=>l});var n=a(95155),s=a(12115),r=a(20547),i=a(59434);let o=r.bL,d=r.l9,l=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:o=4,...d}=e;return(0,n.jsx)(r.ZL,{children:(0,n.jsx)(r.UC,{ref:t,align:s,sideOffset:o,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})})});l.displayName=r.UC.displayName},15035:(e,t,a)=>{"use strict";a.d(t,{c:()=>s});var n=a(69894);class s extends n.d{static async getInventory(){return(await this.get(this.endpoint)).data}static async updateInventory(e,t){let a=this.buildFilter("inventory_id","eq",e);return(await this.patch("".concat(this.endpoint,"?").concat(a),t)).data}static async createInventory(e){return(await this.post(this.endpoint,e)).data}static async deleteInventory(e){let t=this.buildFilter("inventory_id","eq",e);await this.delete("".concat(this.endpoint,"?").concat(t))}}s.endpoint="/inventory"},18346:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(23464);a(49509);let s="/api/postgrest";console.log("[PostgREST Client] Using baseURL: ".concat(s));let r=n.A.create({baseURL:s,headers:{Accept:"application/json","Content-Type":"application/json",Prefer:"return=representation"}});r.interceptors.response.use(e=>("get"!==e.config.method&&console.log("PostgREST Success:",{url:e.config.url,method:e.config.method,status:e.status,data:e.data}),e),e=>{var t,a,n,s,r,i,o,d;(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)!==409&&console.error("PostgREST Error:",{url:(null==e?void 0:null===(s=e.config)||void 0===s?void 0:s.url)||"unknown",method:(null==e?void 0:null===(r=e.config)||void 0===r?void 0:r.method)||"unknown",message:(null==e?void 0:e.message)||"No error message",status:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.status)||"unknown",statusText:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.statusText)||"unknown",data:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:d.data)||null,code:(null==e?void 0:e.code)||"unknown"});let l=Error((null==e?void 0:e.message)||"Unknown error");return Object.assign(l,{status:(null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.status)||500,data:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)||null,code:(null==e?void 0:e.code)||"UNKNOWN_ERROR",config:(null==e?void 0:e.config)||{}}),Promise.reject(l)});let i=r},18348:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});var n=a(69894);class s extends n.d{static async getTransactionTypes(){return(await this.get(this.endpoint)).data}static async createTransactionType(e){return(await this.post(this.endpoint,e)).data}static async updateTransactionType(e,t){let a=this.buildFilter("transactiontype_id","eq",e);return(await this.patch("".concat(this.endpoint,"?").concat(a),t)).data}static async deleteTransactionType(e){let t=this.buildFilter("transactiontype_id","eq",e);return this.delete("".concat(this.endpoint,"?").concat(t))}}s.endpoint="/transaction_type"},27607:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var n=a(95155),s=a(12115),r=a(62177),i=a(90221),o=a(55594),d=a(30285),l=a(62523),c=a(56671),u=a(69894);class p extends u.d{static async getInventoryTransactions(){return(await this.get(this.endpoint)).data}static async createInventoryTransaction(e){return(await this.post(this.endpoint,e)).data}static async updateInventoryTransaction(e,t){let a=this.buildFilter("transaction_id","eq",e);return(await this.patch("".concat(this.endpoint,"?").concat(a),t)).data}static async deleteInventoryTransaction(e){let t=this.buildFilter("transaction_id","eq",e);await this.delete("".concat(this.endpoint,"?").concat(t))}}p.endpoint="/inventory_transactions";var m=a(36346),h=a(14636),y=a(10081),x=a(5196),f=a(59434),g=a(15035),v=a(18348);let b=o.Ik({inventory_id:o.Yj().min(1,"Inventory ID is required"),transaction_type:o.Yj().min(1,"Transaction type is required"),quantity_change:o.Yj().min(1,"Quantity change is required").refine(e=>!isNaN(parseInt(e)),{message:"Quantity must be a number"}),reference_id:o.Yj().min(1,"Reference ID is required"),notes:o.Yj().optional()});function j(){var e;let[t,a]=(0,s.useState)([]),[o,u]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[_,w]=(0,s.useState)([]),[k,R]=(0,s.useState)([]),[T,I]=(0,s.useState)(!1),[S,q]=(0,s.useState)(!1),{register:E,handleSubmit:C,reset:A,setValue:B,watch:F,formState:{errors:L}}=(0,r.mN)({resolver:(0,i.u)(b)}),z=F("inventory_id"),D=F("transaction_type");(0,s.useEffect)(()=>{U(),$(),O()},[]);let $=async()=>{try{let e=await g.c.getInventory();w(e)}catch(e){c.oR.error("Failed to load inventories")}},O=async()=>{try{let e=await v.E.getTransactionTypes();R(e)}catch(e){c.oR.error("Failed to load transaction types")}},U=async()=>{try{let e=await p.getInventoryTransactions();a(e)}catch(e){c.oR.error("Failed to load transactions")}},P=async e=>{N(!0);try{let t={inventory_id:parseInt(e.inventory_id),transaction_type:e.transaction_type,quantity_change:parseInt(e.quantity_change),reference_id:e.reference_id,notes:e.notes||""};o?(await p.updateInventoryTransaction(o.transaction_id,t),c.oR.success("Transaction updated successfully")):(await p.createInventoryTransaction(t),c.oR.success("Transaction created successfully")),U(),u(null),A()}catch(e){c.oR.error(o?"Failed to update transaction":"Failed to create transaction")}finally{N(!1)}},Y=e=>{u(e),B("inventory_id",e.inventory_id.toString()),B("transaction_type",e.transaction_type),B("quantity_change",e.quantity_change.toString()),B("reference_id",e.reference_id),B("notes",e.notes||"")},Q=async e=>{try{await p.deleteInventoryTransaction(e),c.oR.success("Transaction deleted successfully"),U()}catch(e){c.oR.error("Failed to delete transaction")}};return(0,s.useEffect)(()=>{o||A({inventory_id:"",transaction_type:"",quantity_change:"",reference_id:"",notes:""})},[o,A]),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("form",{onSubmit:C(P),className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Inventory"}),(0,n.jsxs)(h.AM,{open:T,onOpenChange:I,children:[(0,n.jsx)(h.Wv,{asChild:!0,children:(0,n.jsxs)(d.$,{variant:"outline",role:"combobox","aria-expanded":T,className:"w-full justify-between",children:[z&&(null===(e=_.find(e=>{var t;return(null===(t=e.inventory_id)||void 0===t?void 0:t.toString())===z}))||void 0===e?void 0:e.product_id)||"Select inventory...",(0,n.jsx)(y.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,n.jsx)(h.hl,{className:"w-full p-0",children:(0,n.jsxs)(m.uB,{children:[(0,n.jsx)(m.G7,{placeholder:"Search inventory..."}),(0,n.jsx)(m.xL,{children:"No inventory found."}),(0,n.jsx)(m.L$,{children:_.map(e=>{var t;return(0,n.jsxs)(m.h_,{onSelect:()=>{var t;B("inventory_id",(null===(t=e.inventory_id)||void 0===t?void 0:t.toString())||""),I(!1)},children:[(0,n.jsx)(x.A,{className:(0,f.cn)("mr-2 h-4 w-4",z===(null===(t=e.inventory_id)||void 0===t?void 0:t.toString())?"opacity-100":"opacity-0")}),e.product_id," - Qty: ",e.quantity_on_hand]},e.inventory_id)})})]})})]}),L.inventory_id&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:L.inventory_id.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Transaction Type"}),(0,n.jsxs)(h.AM,{open:S,onOpenChange:q,children:[(0,n.jsx)(h.Wv,{asChild:!0,children:(0,n.jsxs)(d.$,{variant:"outline",role:"combobox","aria-expanded":S,className:"w-full justify-between",children:[D||"Select transaction type...",(0,n.jsx)(y.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,n.jsx)(h.hl,{className:"w-full p-0",children:(0,n.jsxs)(m.uB,{children:[(0,n.jsx)(m.G7,{placeholder:"Search transaction type..."}),(0,n.jsx)(m.xL,{children:"No transaction type found."}),(0,n.jsx)(m.L$,{children:k.map(e=>(0,n.jsxs)(m.h_,{onSelect:()=>{B("transaction_type",e.name),q(!1)},children:[(0,n.jsx)(x.A,{className:(0,f.cn)("mr-2 h-4 w-4",D===e.name?"opacity-100":"opacity-0")}),e.name]},e.transactiontype_id))})]})})]}),L.transaction_type&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:L.transaction_type.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Quantity Change"}),(0,n.jsx)(l.p,{...E("quantity_change"),className:"dark:bg-gray-700",placeholder:"Enter quantity change",type:"number"}),L.quantity_change&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:L.quantity_change.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Reference ID"}),(0,n.jsx)(l.p,{...E("reference_id"),className:"dark:bg-gray-700",placeholder:"Enter reference ID"}),L.reference_id&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:L.reference_id.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Notes"}),(0,n.jsx)(l.p,{...E("notes"),className:"dark:bg-gray-700",placeholder:"Enter notes"}),L.notes&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:L.notes.message})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(d.$,{type:"submit",disabled:j,className:"w-full md:w-auto",children:j?"Saving...":o?"Update":"Create"}),o&&(0,n.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>{u(null),A()},children:"Cancel"})]})]}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full border-collapse table-auto",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[(0,n.jsx)("th",{className:"px-4 py-2 text-left",children:"ID"}),(0,n.jsx)("th",{className:"px-4 py-2 text-left",children:"Inventory ID"}),(0,n.jsx)("th",{className:"px-4 py-2 text-left",children:"Type"}),(0,n.jsx)("th",{className:"px-4 py-2 text-left",children:"Quantity"}),(0,n.jsx)("th",{className:"px-4 py-2 text-left",children:"Reference"}),(0,n.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,n.jsx)("th",{className:"px-4 py-2 text-center",children:"Actions"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsxs)("tr",{className:"border-b dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,n.jsx)("td",{className:"px-4 py-2",children:e.transaction_id}),(0,n.jsx)("td",{className:"px-4 py-2",children:e.inventory_id}),(0,n.jsx)("td",{className:"px-4 py-2",children:e.transaction_type}),(0,n.jsx)("td",{className:"px-4 py-2",children:e.quantity_change}),(0,n.jsx)("td",{className:"px-4 py-2",children:e.reference_id}),(0,n.jsx)("td",{className:"px-4 py-2",children:new Date(e.transaction_date).toLocaleDateString()}),(0,n.jsx)("td",{className:"px-4 py-2",children:(0,n.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,n.jsx)(d.$,{onClick:()=>Y(e),variant:"outline",size:"sm",children:"Edit"}),(0,n.jsx)(d.$,{onClick:()=>Q(e.transaction_id),variant:"danger",size:"sm",children:"Delete"})]})})]},e.transaction_id))})]})})]})}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var n=a(95155),s=a(12115);let r=(0,a(74466).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-dark shadow-sm dark:bg-primary-dark dark:hover:bg-primary",outline:"border border-secondary-medium bg-white text-secondary-dark hover:bg-secondary-light dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",success:"bg-success text-white hover:bg-success/90 dark:bg-success/80 dark:hover:bg-success",danger:"bg-danger text-white hover:bg-danger/90 dark:bg-danger/80 dark:hover:bg-danger",ghost:"hover:bg-secondary-light text-secondary-dark dark:text-gray-300 dark:hover:bg-gray-800",link:"text-primary hover:text-primary-dark underline-offset-4 hover:underline dark:text-blue-400 dark:hover:text-blue-300"},size:{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-10 px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,...o}=e;return(0,n.jsx)("button",{className:r({variant:s,size:i,className:a}),ref:t,...o})});i.displayName="Button"},36346:(e,t,a)=>{"use strict";a.d(t,{uB:()=>p,xL:()=>h,L$:()=>y,G7:()=>m,h_:()=>x});var n=a(95155),s=a(12115),r=a(77740),i=a(47924),o=a(59434),d=a(15452),l=a(54416);d.bL,d.l9;let c=d.ZL,u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(d.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=d.hJ.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...r}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(u,{}),(0,n.jsxs)(d.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),"aria-describedby":"dialog-description",...r,children:[s,(0,n.jsx)("span",{id:"dialog-description",className:"sr-only",children:"Dialog content"}),(0,n.jsxs)(d.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(l.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}).displayName=d.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(d.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})}).displayName=d.hE.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(d.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})}).displayName=d.VY.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.uB,{ref:t,className:(0,o.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...s})});p.displayName=r.uB.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(i.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(r.uB.Input,{ref:t,className:(0,o.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...s})]})});m.displayName=r.uB.Input.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.uB.List,{ref:t,className:(0,o.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...s})}).displayName=r.uB.List.displayName;let h=s.forwardRef((e,t)=>(0,n.jsx)(r.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));h.displayName=r.uB.Empty.displayName;let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.uB.Group,{ref:t,className:(0,o.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...s})});y.displayName=r.uB.Group.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.uB.Separator,{ref:t,className:(0,o.cn)("-mx-1 h-px bg-border",a),...s})}).displayName=r.uB.Separator.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.uB.Item,{ref:t,className:(0,o.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a),...s})});x.displayName=r.uB.Item.displayName},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var n=a(52596),s=a(39688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,n.$)(t))}},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var n=a(95155);let s=a(12115).forwardRef((e,t)=>{let{...a}=e;return(0,n.jsx)("input",{ref:t,...a})});s.displayName="Input"},69894:(e,t,a)=>{"use strict";a.d(t,{d:()=>s});var n=a(18346);class s{static async get(e){return n.A.get(e)}static async post(e,t){try{return await n.A.post(e,t)}catch(t){throw 409!==t.status&&console.error("Error in POST request to ".concat(e,":"),t),t}}static async patch(e,t){return n.A.patch(e,t)}static async delete(e){return n.A.delete(e)}static buildFilter(e,t,a){return"".concat(e,"=").concat(t,".").concat(a)}}},72507:(e,t,a)=>{Promise.resolve().then(a.bind(a,27607))}},e=>{var t=t=>e(e.s=t);e.O(0,[7285,6774,9688,2177,87,1342,5880,8441,1684,7358],()=>t(72507)),_N_E=e.O()}]);