(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5362],{18346:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(23464);t(49509);let r="/api/postgrest";console.log("[PostgREST Client] Using baseURL: ".concat(r));let l=a.A.create({baseURL:r,headers:{Accept:"application/json","Content-Type":"application/json",Prefer:"return=representation"}});l.interceptors.response.use(e=>("get"!==e.config.method&&console.log("PostgREST Success:",{url:e.config.url,method:e.config.method,status:e.status,data:e.data}),e),e=>{var s,t,a,r,l,d,c,o;(null==e?void 0:null===(s=e.response)||void 0===s?void 0:s.status)!==409&&console.error("PostgREST Error:",{url:(null==e?void 0:null===(r=e.config)||void 0===r?void 0:r.url)||"unknown",method:(null==e?void 0:null===(l=e.config)||void 0===l?void 0:l.method)||"unknown",message:(null==e?void 0:e.message)||"No error message",status:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:d.status)||"unknown",statusText:(null==e?void 0:null===(c=e.response)||void 0===c?void 0:c.statusText)||"unknown",data:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.data)||null,code:(null==e?void 0:e.code)||"unknown"});let n=Error((null==e?void 0:e.message)||"Unknown error");return Object.assign(n,{status:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)||500,data:(null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.data)||null,code:(null==e?void 0:e.code)||"UNKNOWN_ERROR",config:(null==e?void 0:e.config)||{}}),Promise.reject(n)});let d=l},59434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(52596),r=t(39688);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},71382:(e,s,t)=>{Promise.resolve().then(t.bind(t,87572))},87572:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(95155),r=t(12115),l=t(59434);let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});d.displayName="Card",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})}).displayName="CardHeader",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})}).displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})}).displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";var c=t(67624),o=t(37108),n=t(22915),i=t(10809),x=t(18346),u=t(83540),m=t(58995),h=t(79133),p=t(54811),j=t(94517);function y(){let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{(async()=>{try{let e=await x.A.get("/rpc/get_product_dashboard_data");s(e.data)}catch(e){console.error("Error fetching dashboard data:",e)}finally{l(!1)}})()},[]),t)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})});if(!e)return null;let y=[{name:"Available",value:e.stock_status.available,color:"#28A745"},{name:"Low Stock",value:e.stock_status.low_stock,color:"#FFC107"},{name:"Out of Stock",value:e.stock_status.out_of_stock,color:"#DC3545"}],f=Object.entries(e.category_counts).map(e=>{let[s,t]=e;return{name:s,value:t,color:"hsl(".concat(360*Math.random(),", 70%, 50%)")}});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-secondary-dark dark:text-gray-200",children:"Product Dashboard"}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(d,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(o.A,{className:"h-10 w-10 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-secondary dark:text-gray-400",children:"Total Products"}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-secondary-dark dark:text-gray-200",children:e.total_products})]})]})}),(0,a.jsx)(d,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n.A,{className:"h-10 w-10 text-success"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-secondary dark:text-gray-400",children:"Available"}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-secondary-dark dark:text-gray-200",children:e.stock_status.available})]})]})}),(0,a.jsx)(d,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(i.A,{className:"h-10 w-10 text-warning"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-secondary dark:text-gray-400",children:"Low Stock"}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-secondary-dark dark:text-gray-200",children:e.stock_status.low_stock})]})]})}),(0,a.jsx)(d,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(o.A,{className:"h-10 w-10 text-danger"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-secondary dark:text-gray-400",children:"Out of Stock"}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-secondary-dark dark:text-gray-200",children:e.stock_status.out_of_stock})]})]})})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(d,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-secondary-dark dark:text-gray-200",children:"Stock Status"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(u.u,{width:"100%",height:"100%",children:(0,a.jsxs)(m.r,{children:[(0,a.jsx)(h.F,{data:y,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,children:y.map((e,s)=>(0,a.jsx)(p.f,{fill:e.color},"cell-".concat(s)))}),(0,a.jsx)(j.m,{})]})})})]}),(0,a.jsxs)(d,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-secondary-dark dark:text-gray-200",children:"Products by Category"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(u.u,{width:"100%",height:"100%",children:(0,a.jsxs)(m.r,{children:[(0,a.jsx)(h.F,{data:f,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,children:f.map((e,s)=>(0,a.jsx)(p.f,{fill:e.color},"cell-".concat(s)))}),(0,a.jsx)(j.m,{})]})})})]})]}),(0,a.jsxs)(d,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-secondary-dark dark:text-gray-200",children:"Latest Products"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b dark:border-gray-700",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 text-secondary dark:text-gray-400",children:"Name"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-secondary dark:text-gray-400",children:"Category"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-secondary dark:text-gray-400",children:"Created At"})]})}),(0,a.jsx)("tbody",{children:e.latest_products.map(e=>(0,a.jsxs)("tr",{className:"border-b dark:border-gray-700",children:[(0,a.jsx)("td",{className:"py-3 px-4 text-secondary-dark dark:text-gray-200",children:e.name}),(0,a.jsx)("td",{className:"py-3 px-4 text-secondary-dark dark:text-gray-200",children:e.category}),(0,a.jsx)("td",{className:"py-3 px-4 text-secondary-dark dark:text-gray-200",children:new Date(e.created_at).toLocaleDateString()})]},e.product_id))})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[7285,9688,6726,8441,1684,7358],()=>s(71382)),_N_E=e.O()}]);