(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7941],{16178:(e,a,t)=>{Promise.resolve().then(t.bind(t,27799))},18125:(e,a,t)=>{"use strict";t.d(a,{V:()=>r});let r=e=>{if(e.startsWith("http"))return e;let a=e.replace(/([^:])\/\//g,"$1/"),t=a.startsWith("./")?a.substring(1):a,r="";r=t.startsWith("/images/")?t:"/images/".concat(t.startsWith("/")?t.slice(1):t);let s="/api/images".concat(r.substring(7));return"".concat(s,"?t=").concat(Date.now())}},18346:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(23464);t(49509);let s="/api/postgrest";console.log("[PostgREST Client] Using baseURL: ".concat(s));let d=r.A.create({baseURL:s,headers:{Accept:"application/json","Content-Type":"application/json",Prefer:"return=representation"}});d.interceptors.response.use(e=>("get"!==e.config.method&&console.log("PostgREST Success:",{url:e.config.url,method:e.config.method,status:e.status,data:e.data}),e),e=>{var a,t,r,s,d,i,l,o;(null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.status)!==409&&console.error("PostgREST Error:",{url:(null==e?void 0:null===(s=e.config)||void 0===s?void 0:s.url)||"unknown",method:(null==e?void 0:null===(d=e.config)||void 0===d?void 0:d.method)||"unknown",message:(null==e?void 0:e.message)||"No error message",status:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.status)||"unknown",statusText:(null==e?void 0:null===(l=e.response)||void 0===l?void 0:l.statusText)||"unknown",data:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.data)||null,code:(null==e?void 0:e.code)||"unknown"});let n=Error((null==e?void 0:e.message)||"Unknown error");return Object.assign(n,{status:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)||500,data:(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data)||null,code:(null==e?void 0:e.code)||"UNKNOWN_ERROR",config:(null==e?void 0:e.config)||{}}),Promise.reject(n)});let i=d},27799:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>q});var r=t(95155),s=t(12115),d=t(62177),i=t(90221),l=t(55594),o=t(56671),n=t(67624),c=t(47924),m=t(84616),u=t(59434),g=t(18346),h=t(66766),p=t(88539),x=t(18125),v=t(30064);function b(e){let{className:a,...t}=e;return(0,r.jsx)(v.bL,{"data-slot":"tabs",className:(0,u.cn)("flex flex-col gap-2",a),...t})}function y(e){let{className:a,...t}=e;return(0,r.jsx)(v.B8,{"data-slot":"tabs-list",className:(0,u.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function f(e){let{className:a,...t}=e;return(0,r.jsx)(v.l9,{"data-slot":"tabs-trigger",className:(0,u.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function j(e){let{className:a,...t}=e;return(0,r.jsx)(v.UC,{"data-slot":"tabs-content",className:(0,u.cn)("flex-1 outline-none",a),...t})}var k=t(89613);let N=k.Kq,w=k.bL,_=k.l9,R=s.forwardRef((e,a)=>{let{className:t,sideOffset:s=4,...d}=e;return(0,r.jsx)(k.UC,{ref:a,sideOffset:s,className:(0,u.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...d})});R.displayName=k.UC.displayName;var S=t(30285),C=t(62523),E=t(59409);let A={create:async e=>(await g.A.post("/products",e)).data,search:async e=>(await g.A.get("/products?name=ilike.*".concat(e,"*"))).data,delete:async e=>{await g.A.delete("/products?product_id=eq.".concat(e))}},P=l.Ik({sku:l.Yj().min(1,"SKU is required"),name:l.Yj().min(1,"Product name is required"),description:l.Yj().min(1,"Description is required"),category:l.Yj().min(1,"Category is required"),unit_weight:l.au.number().min(.01,"Weight must be greater than 0").nonnegative("Weight cannot be negative"),dimensions:l.Ik({width:l.au.number().min(0,"Width cannot be negative").nonnegative("Width cannot be negative"),height:l.au.number().min(0,"Height cannot be negative").nonnegative("Height cannot be negative"),length:l.au.number().min(0,"Length cannot be negative").nonnegative("Length cannot be negative")}),season:l.Yj().min(1,"Season is required"),gender:l.Yj().min(1,"Gender is required"),collection:l.Yj().min(1,"Collection is required"),material:l.Yj().min(1,"Material is required"),style:l.Yj().min(1,"Style is required"),meta_key:l.Yj().optional(),meta_value:l.Yj().optional()});function q(){var e,a,t,l,v,k;let[q,U]=(0,s.useState)("basic"),[F,I]=(0,s.useState)(!1),[V,W]=(0,s.useState)(""),[D,$]=(0,s.useState)([]),[z,L]=(0,s.useState)(null),[T,M]=(0,s.useState)(!1),[Y,K]=(0,s.useState)([]),[B,O]=(0,s.useState)([]),[H,G]=(0,s.useState)(null),[J,Q]=(0,s.useState)(!1),[Z,X]=(0,s.useState)(null),[ee,ea]=(0,s.useState)(!1),{register:et,handleSubmit:er,formState:{errors:es},reset:ed,setError:ei,setValue:el,watch:eo}=(0,d.mN)({resolver:(0,i.u)(P),defaultValues:{dimensions:{width:0,height:0,length:0},unit_weight:0,meta_key:"",meta_value:""},mode:"onChange"}),en=(0,d.mN)({defaultValues:{meta_key:"",meta_value:""}}),ec=()=>{var e,a,t,r,s,d,i,l,o,n,c,m,u,g,h,p,x,v,b;return{basic:{hasError:!!(es.sku||es.name||es.description),messages:[null===(e=es.sku)||void 0===e?void 0:e.message,null===(a=es.name)||void 0===a?void 0:a.message,null===(t=es.description)||void 0===t?void 0:t.message].filter(Boolean)},details:{hasError:!!(es.category||es.season||es.gender||es.collection||es.material||es.style),messages:[null===(r=es.category)||void 0===r?void 0:r.message,null===(s=es.season)||void 0===s?void 0:s.message,null===(d=es.gender)||void 0===d?void 0:d.message,null===(i=es.collection)||void 0===i?void 0:i.message,null===(l=es.material)||void 0===l?void 0:l.message,null===(o=es.style)||void 0===o?void 0:o.message].filter(Boolean)},dimensions:{hasError:!!((null===(n=es.dimensions)||void 0===n?void 0:n.width)||(null===(c=es.dimensions)||void 0===c?void 0:c.height)||(null===(m=es.dimensions)||void 0===m?void 0:m.length)||es.unit_weight),messages:[null===(g=es.dimensions)||void 0===g?void 0:null===(u=g.width)||void 0===u?void 0:u.message,null===(p=es.dimensions)||void 0===p?void 0:null===(h=p.height)||void 0===h?void 0:h.message,null===(v=es.dimensions)||void 0===v?void 0:null===(x=v.length)||void 0===x?void 0:x.message,null===(b=es.unit_weight)||void 0===b?void 0:b.message].filter(Boolean)},metadata:{hasError:!1,messages:[]},images:{hasError:!1,messages:[]}}},em=(e,a)=>{el(a,e)},eu=async()=>{if(!V.trim()){o.oR.error("Please enter a search term");return}M(!0);try{let e=await A.search(V);$(e),0===e.length&&o.oR.info("No products found")}catch(e){o.oR.error("Failed to search products")}finally{M(!1)}},eg=async e=>{var a,t,r;if(!e)return;let s={width:(null===(a=e.dimensions)||void 0===a?void 0:a.width)||0,height:(null===(t=e.dimensions)||void 0===t?void 0:t.height)||0,length:(null===(r=e.dimensions)||void 0===r?void 0:r.length)||0},d={...e,dimensions:s};if(L(d),ed({sku:d.sku,name:d.name,description:d.description,category:d.category,unit_weight:d.unit_weight,dimensions:d.dimensions,season:d.season,gender:d.gender,collection:d.collection,material:d.material,style:d.style}),d.product_id){try{let e=await g.A.get("/product_metadata",{params:{product_id:"eq.".concat(d.product_id)}});K(e.data||[])}catch(e){o.oR.error("Failed to fetch product metadata")}try{let e=await g.A.get("/product_images",{params:{product_id:"eq.".concat(d.product_id)}});O(e.data||[])}catch(e){o.oR.error("Failed to fetch product images")}}U("metadata")},eh=()=>{L(null),ed(),U("basic")},ep=async e=>{if(confirm("Are you sure you want to delete this product?"))try{await A.delete(e),o.oR.success("Product deleted successfully"),$(a=>a.filter(a=>a.product_id!==e)),(null==z?void 0:z.product_id)===e&&eh()}catch(e){o.oR.error("Failed to delete product")}};(0,s.useEffect)(()=>{(null==z?void 0:z.product_id)&&(async()=>{try{let e=await g.A.get("/product_metadata",{params:{product_id:"eq.".concat(z.product_id)}});K(e.data||[])}catch(e){console.error("Failed to fetch metadata:",e)}})()},[null==z?void 0:z.product_id]),(0,s.useEffect)(()=>{B.length>0&&(console.log("Product images loaded:",B),B.forEach(e=>{console.log("Image URL before getImageUrl:",e.image_url),console.log("Image URL after getImageUrl:",(0,x.V)(e.image_url))}))},[B]);let ex=async e=>{var a,t,r,s,d,i,l,n;if("metadata"!==q&&"images"!==q){I(!0);try{if(!z){let{meta_key:d,meta_value:i,...l}=e,n={...l,dimensions:{width:Number((null===(a=l.dimensions)||void 0===a?void 0:a.width)||0),height:Number((null===(t=l.dimensions)||void 0===t?void 0:t.height)||0),length:Number((null===(r=l.dimensions)||void 0===r?void 0:r.length)||0)}};console.log("Submitting product data:",n);try{let e=await A.create(n),a=Array.isArray(e)?e[0]:e;if(!a||"number"!=typeof a.product_id)throw console.error("Invalid product response:",e),Error("Invalid product response structure");if(L(a),D.length>0&&$(e=>[...e,a]),o.oR.success("Product created successfully"),U("metadata"),a.product_id)try{let[e,t]=await Promise.all([g.A.get("/product_metadata",{params:{product_id:"eq.".concat(a.product_id)}}),g.A.get("/product_images",{params:{product_id:"eq.".concat(a.product_id)}})]);K(e.data||[]),O(t.data||[])}catch(e){console.error("Failed to fetch product metadata/images:",e)}}catch(e){if(409===e.status||(null===(s=e.message)||void 0===s?void 0:s.includes("duplicate")))o.oR.error("A product with this SKU already exists",{description:"Please use a different SKU"}),ei("sku",{type:"manual",message:"This SKU is already in use"});else throw e}}}catch(a){let e=(null===(i=a.response)||void 0===i?void 0:null===(d=i.data)||void 0===d?void 0:d.message)||(null===(n=a.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.detail)||a.message||"Failed to save product";o.oR.error("Error saving product",{description:e}),console.error("Product save error:",a)}finally{I(!1)}}},ev=async()=>{var e,a,t,r,s;let d=en.watch("meta_key"),i=en.watch("meta_value");if(!d||!i){o.oR.error("Both key and value are required");return}if(!(null==z?void 0:z.product_id))try{let a=await g.A.get("/products",{params:{product_id:"eq.".concat(null==z?void 0:z.product_id)}});if(null===(e=a.data)||void 0===e?void 0:e[0])L(a.data[0]);else{o.oR.error("Product not found. Please refresh the page.");return}}catch(e){console.error("Error fetching product:",e),o.oR.error("Failed to verify product state");return}try{if(!(null==z?void 0:z.product_id)){o.oR.error("Product ID is required");return}let e=z.product_id,a=await g.A.post("/product_metadata",{product_id:e,meta_key:d,meta_value:i},{headers:{Prefer:"return=representation"}}),t=Array.isArray(a.data)?a.data[0]:a.data;K(e=>[...e,t]),en.reset(),o.oR.success("Metadata added successfully")}catch(d){console.error("Error adding metadata:",d);let e=(null===(t=d.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||(null===(s=d.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.detail)||d.message||"Failed to add metadata";o.oR.error("Error: ".concat(e))}},eb=async e=>{if(!e){o.oR.error("Invalid metadata ID");return}try{await g.A.delete("/product_metadata",{headers:{Prefer:"return=minimal"},params:{meta_id:"eq.".concat(e)}}),K(a=>a.filter(a=>a.meta_id!==e)),en.reset(),o.oR.success("Metadata deleted successfully")}catch(d){var a,t,r,s;let e=(null===(t=d.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||(null===(s=d.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.detail)||"Failed to delete metadata";o.oR.error(e),console.error("Delete metadata error:",d)}},ey=async()=>{if(!H||!(null==z?void 0:z.product_id)){o.oR.error("Please select a file and ensure product is created first");return}Q(!0);try{let e=new FormData;e.append("file",H);let a=await fetch("/api/upload",{method:"POST",body:e});if(!a.ok)throw Error("Failed to upload file");let t=(await a.json()).filename;console.log("Received image URL from upload API:",t);let r={product_id:Number(z.product_id),image_url:t,is_primary:0===B.length};await g.A.post("/product_images",r);let s={...r,created_at:new Date().toISOString()};O(e=>[...e,s]),G(null),o.oR.success("Image uploaded successfully")}catch(t){var e,a;console.error("Upload error details:",t),o.oR.error("Failed to upload image: "+((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||t.message))}finally{Q(!1)}},ef=async e=>{try{await g.A.patch("/product_images?product_id=eq.".concat(null==z?void 0:z.product_id),{is_primary:!1}),await g.A.patch("/product_images?image_url=eq.".concat(e),{is_primary:!0});let a=B.map(a=>({...a,is_primary:a.image_url===e}));O(a),o.oR.success("Primary image updated")}catch(e){o.oR.error("Failed to update primary image")}},ej=async e=>{try{await g.A.delete("/product_images?image_url=eq.".concat(e)),O(B.filter(a=>a.image_url!==e)),o.oR.success("Image deleted successfully")}catch(e){o.oR.error("Failed to delete image")}},ek=async()=>{if(!Z)return;let e=en.watch("meta_key"),a=en.watch("meta_value");if(!e||!a){o.oR.error("Both key and value are required");return}try{await g.A.patch("/product_metadata",{meta_key:e,meta_value:a},{headers:{Prefer:"return=minimal"},params:{meta_id:"eq.".concat(Z.meta_id)}}),K(t=>t.map(t=>t.meta_id===Z.meta_id?{...t,meta_key:e,meta_value:a}:t)),en.reset(),X(null),o.oR.success("Metadata updated successfully")}catch(a){var t,r,s,d;let e=(null===(r=a.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||(null===(d=a.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.detail)||"Failed to update metadata";o.oR.error(e),console.error("Update metadata error:",a)}},eN=e=>{X(e),en.setValue("meta_key",e.meta_key),en.setValue("meta_value",e.meta_value)};return(0,s.useEffect)(()=>{z&&console.log("Selected product updated:",{product_id:z.product_id,name:z.name})},[z]),(0,s.useEffect)(()=>{console.log("Selected product state changed:",z)},[z]),(0,s.useEffect)(()=>{(null==z?void 0:z.product_id)&&ee&&(console.log("Product created and selected:",z),ea(!1))},[z,ee]),(0,s.useEffect)(()=>{console.log("Selected product updated:",z)},[z]),(0,s.useEffect)(()=>{(null==z?void 0:z.product_id)&&"metadata"===q&&(async()=>{try{let e=await g.A.get("/product_metadata",{params:{product_id:"eq.".concat(z.product_id)}});K(e.data||[])}catch(e){console.error("Failed to fetch metadata:",e),o.oR.error("Failed to fetch metadata")}})()},[null==z?void 0:z.product_id,q]),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,r.jsx)(C.p,{value:V,onChange:e=>W(e.target.value),placeholder:"Search products...",className:"max-w-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400"}),(0,r.jsxs)(S.$,{onClick:eu,disabled:T,children:[T?(0,r.jsx)(n.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"ml-2",children:"Search"})]}),(0,r.jsxs)(S.$,{onClick:eh,variant:"outline",className:"dark:border-gray-600 dark:text-gray-200",children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"ml-2",children:"New Product"})]})]}),D.length>0&&(0,r.jsx)("div",{className:"space-y-2",children:D.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",e.sku]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(S.$,{variant:"outline",onClick:()=>eg(e),children:"Edit"}),(0,r.jsx)(S.$,{variant:"danger",onClick:()=>ep(e.product_id),children:"Delete"})]})]},e.product_id))})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:z?"Edit Product":"Add New Product"}),(0,r.jsx)("form",{onSubmit:e=>{if("metadata"===q||"images"===q){e.preventDefault();return}er(ex)(e)},children:(0,r.jsxs)(b,{value:q,onValueChange:e=>{if(("metadata"===e||"images"===e)&&!(null==z?void 0:z.product_id)){o.oR.error("Please create or select a product first");return}U(e)},className:"w-full",children:[(0,r.jsx)(y,{className:"grid w-full",style:{gridTemplateColumns:"repeat(".concat(z?5:3,", 1fr)")},children:(0,r.jsx)(N,{children:(z?[{id:"basic",label:"Basic Info"},{id:"details",label:"Details"},{id:"dimensions",label:"Dimensions"},{id:"metadata",label:"Metadata"},{id:"images",label:"Images"}]:[{id:"basic",label:"Basic Info"},{id:"details",label:"Details"},{id:"dimensions",label:"Dimensions"}]).map(e=>{var a,t,s,d;return(0,r.jsxs)(w,{children:[(0,r.jsx)(_,{asChild:!0,children:(0,r.jsxs)(f,{value:e.id,className:(0,u.cn)((null===(a=ec()[e.id])||void 0===a?void 0:a.hasError)&&"border-red-500"),children:[e.label,(null===(t=ec()[e.id])||void 0===t?void 0:t.hasError)&&(0,r.jsx)("span",{className:"ml-2 text-red-500",children:"*"})]})}),(null===(s=ec()[e.id])||void 0===s?void 0:s.hasError)&&(0,r.jsxs)(R,{className:"bg-red-50 border-red-200 text-red-800 p-2",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Missing Information:"}),(0,r.jsx)("ul",{className:"list-disc list-inside",children:null===(d=ec()[e.id])||void 0===d?void 0:d.messages.map((e,a)=>(0,r.jsx)("li",{children:e},a))})]})]},e.id)})})}),(0,r.jsx)(j,{value:"basic",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"SKU *"}),(0,r.jsx)(C.p,{...et("sku"),placeholder:"Enter SKU",className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400",es.sku&&"border-red-500")}),es.sku&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.sku.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Product Name *"}),(0,r.jsx)(C.p,{...et("name"),placeholder:"Enter product name",className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400",es.name&&"border-red-500")}),es.name&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Description *"}),(0,r.jsx)(p.T,{...et("description"),placeholder:"Enter product description",className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400",es.description&&"border-red-500")}),es.description&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.description.message})]})]})}),(0,r.jsx)(j,{value:"details",children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Category *"}),(0,r.jsxs)(E.l6,{onValueChange:e=>em(e,"category"),value:eo("category"),children:[(0,r.jsx)(E.bq,{className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",es.category&&"border-red-500"),children:(0,r.jsx)(E.yv,{placeholder:"Select category"})}),(0,r.jsxs)(E.gC,{children:[(0,r.jsx)(E.eb,{value:"shirts",children:"Shirts"}),(0,r.jsx)(E.eb,{value:"pants",children:"Pants"}),(0,r.jsx)(E.eb,{value:"accessories",children:"Accessories"})]})]}),es.category&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.category.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Season *"}),(0,r.jsxs)(E.l6,{onValueChange:e=>em(e,"season"),value:eo("season"),children:[(0,r.jsx)(E.bq,{className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",es.season&&"border-red-500"),children:(0,r.jsx)(E.yv,{placeholder:"Select season"})}),(0,r.jsxs)(E.gC,{children:[(0,r.jsx)(E.eb,{value:"spring",children:"Spring"}),(0,r.jsx)(E.eb,{value:"summer",children:"Summer"}),(0,r.jsx)(E.eb,{value:"fall",children:"Fall"}),(0,r.jsx)(E.eb,{value:"winter",children:"Winter"}),(0,r.jsx)(E.eb,{value:"all",children:"All Seasons"})]})]}),es.season&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.season.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Gender *"}),(0,r.jsxs)(E.l6,{onValueChange:e=>em(e,"gender"),value:eo("gender"),children:[(0,r.jsx)(E.bq,{className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",es.gender&&"border-red-500"),children:(0,r.jsx)(E.yv,{placeholder:"Select gender"})}),(0,r.jsxs)(E.gC,{children:[(0,r.jsx)(E.eb,{value:"men",children:"Men"}),(0,r.jsx)(E.eb,{value:"women",children:"Women"}),(0,r.jsx)(E.eb,{value:"unisex",children:"Unisex"})]})]}),es.gender&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.gender.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Collection *"}),(0,r.jsxs)(E.l6,{onValueChange:e=>em(e,"collection"),value:eo("collection"),children:[(0,r.jsx)(E.bq,{className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",es.collection&&"border-red-500"),children:(0,r.jsx)(E.yv,{placeholder:"Select collection"})}),(0,r.jsxs)(E.gC,{children:[(0,r.jsx)(E.eb,{value:"casual",children:"Casual"}),(0,r.jsx)(E.eb,{value:"formal",children:"Formal"}),(0,r.jsx)(E.eb,{value:"sport",children:"Sport"})]})]}),es.collection&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.collection.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Material *"}),(0,r.jsxs)(E.l6,{onValueChange:e=>em(e,"material"),value:eo("material"),children:[(0,r.jsx)(E.bq,{className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",es.material&&"border-red-500"),children:(0,r.jsx)(E.yv,{placeholder:"Select material"})}),(0,r.jsxs)(E.gC,{children:[(0,r.jsx)(E.eb,{value:"cotton",children:"Cotton"}),(0,r.jsx)(E.eb,{value:"polyester",children:"Polyester"}),(0,r.jsx)(E.eb,{value:"wool",children:"Wool"}),(0,r.jsx)(E.eb,{value:"leather",children:"Leather"})]})]}),es.material&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.material.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Style *"}),(0,r.jsxs)(E.l6,{onValueChange:e=>em(e,"style"),value:eo("style"),children:[(0,r.jsx)(E.bq,{className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",es.style&&"border-red-500"),children:(0,r.jsx)(E.yv,{placeholder:"Select style"})}),(0,r.jsxs)(E.gC,{children:[(0,r.jsx)(E.eb,{value:"classic",children:"Classic"}),(0,r.jsx)(E.eb,{value:"modern",children:"Modern"}),(0,r.jsx)(E.eb,{value:"vintage",children:"Vintage"})]})]}),es.style&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.style.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Unit Weight (kg) *"}),(0,r.jsx)(C.p,{...et("unit_weight"),type:"number",step:"0.01",min:"0",placeholder:"Enter weight in kg",className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400",es.unit_weight&&"border-red-500")}),es.unit_weight&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.unit_weight.message})]})]})})}),(0,r.jsx)(j,{value:"dimensions",children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Width (cm)"}),(0,r.jsx)(C.p,{...et("dimensions.width"),type:"number",step:"0.1",min:"0",placeholder:"Width",className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400",(null===(e=es.dimensions)||void 0===e?void 0:e.width)&&"border-red-500")}),(null===(a=es.dimensions)||void 0===a?void 0:a.width)&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.dimensions.width.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Height (cm)"}),(0,r.jsx)(C.p,{...et("dimensions.height"),type:"number",step:"0.1",min:"0",placeholder:"Height",className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400",(null===(t=es.dimensions)||void 0===t?void 0:t.height)&&"border-red-500")}),(null===(l=es.dimensions)||void 0===l?void 0:l.height)&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.dimensions.height.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Length (cm)"}),(0,r.jsx)(C.p,{...et("dimensions.length"),type:"number",step:"0.1",min:"0",placeholder:"Length",className:(0,u.cn)("dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400",(null===(v=es.dimensions)||void 0===v?void 0:v.length)&&"border-red-500")}),(null===(k=es.dimensions)||void 0===k?void 0:k.length)&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:es.dimensions.length.message})]})]})})}),z&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{value:"metadata",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Meta Key"}),(0,r.jsx)(C.p,{...en.register("meta_key"),placeholder:"Enter meta key",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Meta Value"}),(0,r.jsx)(C.p,{...en.register("meta_value"),placeholder:"Enter meta value",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:placeholder-gray-400"})]}),(0,r.jsxs)("div",{className:"flex items-end",children:[(0,r.jsxs)(S.$,{type:"button",onClick:Z?ek:ev,className:"mb-1",children:[Z?"Update":"Add"," Metadata"]}),Z&&(0,r.jsx)(S.$,{type:"button",variant:"outline",onClick:()=>{X(null),en.reset()},className:"ml-2 mb-1",children:"Cancel"})]})]}),(0,r.jsx)("div",{className:"mt-4",children:Y.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 border dark:border-gray-600 rounded mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"font-medium dark:text-gray-200",children:[e.meta_key,": "]}),(0,r.jsx)("span",{className:"dark:text-gray-300",children:e.meta_value})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(S.$,{variant:"outline",size:"sm",onClick:()=>eN(e),className:"dark:border-gray-600",children:"Edit"}),(0,r.jsx)(S.$,{variant:"danger",size:"sm",onClick:()=>e.meta_id&&eb(e.meta_id),className:(0,u.cn)("dark:bg-red-900 dark:hover:bg-red-800"),children:"Delete"})]})]},e.meta_id))})]})}),(0,r.jsx)(j,{value:"images",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(C.p,{type:"file",accept:"image/*",onChange:e=>{var a;(null===(a=e.target.files)||void 0===a?void 0:a[0])&&G(e.target.files[0])},className:"dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"}),(0,r.jsx)(S.$,{onClick:ey,disabled:!H||J,className:"dark:bg-gray-700",children:J?"Uploading...":"Upload"})]}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4 mt-4",children:B.map((e,a)=>(0,r.jsxs)("div",{className:"relative border dark:border-gray-600 rounded p-2",children:[(0,r.jsx)(h.default,{src:(0,x.V)(e.image_url),alt:"Product image",width:200,height:200,className:"object-cover rounded",unoptimized:!0}),(0,r.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,r.jsx)(S.$,{size:"sm",variant:e.is_primary?"default":"outline",onClick:()=>ef(e.image_url),disabled:e.is_primary,className:"dark:bg-gray-700",children:e.is_primary?"Primary":"Set Primary"}),(0,r.jsx)(S.$,{size:"sm",variant:"danger",onClick:()=>ej(e.image_url),className:(0,u.cn)("dark:bg-red-900 dark:hover:bg-red-800"),children:"Delete"})]})]},a))})]})})]}),"metadata"!==q&&"images"!==q&&(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"* Required fields must be completed before saving"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(S.$,{type:"button",variant:"outline",onClick:()=>ed(),children:"Reset"}),(0,r.jsx)(S.$,{type:"submit",disabled:F,children:F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):z?"Update Product":"Create Product"})]})]})]})})]})]})}},30285:(e,a,t)=>{"use strict";t.d(a,{$:()=>i});var r=t(95155),s=t(12115);let d=(0,t(74466).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-dark shadow-sm dark:bg-primary-dark dark:hover:bg-primary",outline:"border border-secondary-medium bg-white text-secondary-dark hover:bg-secondary-light dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",success:"bg-success text-white hover:bg-success/90 dark:bg-success/80 dark:hover:bg-success",danger:"bg-danger text-white hover:bg-danger/90 dark:bg-danger/80 dark:hover:bg-danger",ghost:"hover:bg-secondary-light text-secondary-dark dark:text-gray-300 dark:hover:bg-gray-800",link:"text-primary hover:text-primary-dark underline-offset-4 hover:underline dark:text-blue-400 dark:hover:text-blue-300"},size:{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-10 px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,a)=>{let{className:t,variant:s,size:i,...l}=e;return(0,r.jsx)("button",{className:d({variant:s,size:i,className:t}),ref:a,...l})});i.displayName="Button"},59409:(e,a,t)=>{"use strict";t.d(a,{bq:()=>m,eb:()=>g,gC:()=>u,l6:()=>n,s3:()=>c,yv:()=>h});var r=t(95155),s=t(12115),d=t(93081),i=t(66474),l=t(5196),o=t(59434);let n=d.bL,c=d.YJ,m=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(d.l9,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:[s,(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})]})});m.displayName=d.l9.displayName;let u=s.forwardRef((e,a)=>{let{className:t,children:s,position:i="popper",...l}=e;return(0,r.jsx)(d.ZL,{children:(0,r.jsx)(d.UC,{ref:a,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:(0,r.jsx)(d.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});u.displayName=d.UC.displayName;let g=s.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,r.jsxs)(d.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm text-gray-900 outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(d.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),(0,r.jsx)(d.p4,{children:s})]})});g.displayName=d.q7.displayName;let h=s.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,r.jsx)(d.WT,{ref:a,className:(0,o.cn)("text-sm text-gray-900",t),...i,children:s})});h.displayName=d.WT.displayName},59434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>d});var r=t(52596),s=t(39688);function d(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},62523:(e,a,t)=>{"use strict";t.d(a,{p:()=>s});var r=t(95155);let s=t(12115).forwardRef((e,a)=>{let{...t}=e;return(0,r.jsx)("input",{ref:a,...t})});s.displayName="Input"},88539:(e,a,t)=>{"use strict";t.d(a,{T:()=>i});var r=t(95155),s=t(12115),d=t(59434);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s})});i.displayName="Textarea"}},e=>{var a=a=>e(e.s=a);e.O(0,[7285,6774,9688,2177,87,1342,6918,6766,1721,8441,1684,7358],()=>a(16178)),_N_E=e.O()}]);