(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5973],{9715:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(95155),r=a(12115),n=a(62177),i=a(90221),o=a(55594),c=a(18348),l=a(30285),d=a(62523),u=a(56671);let p=o.Ik({name:o.Yj().min(1,"Name is required").max(50,"Name must be 50 characters or less")});function h(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(null),[h,y]=(0,r.useState)(!1),{register:m,handleSubmit:g,reset:x,formState:{errors:v}}=(0,n.mN)({resolver:(0,i.u)(p)});async function b(){try{let e=await c.E.getTransactionTypes();t(e)}catch(e){u.oR.error("Failed to load transaction types")}}(0,r.useEffect)(()=>{b()},[]),(0,r.useEffect)(()=>{a?x({name:a.name}):x({name:""})},[a,x]);let f=async e=>{y(!0);try{a?(await c.E.updateTransactionType(a.transactiontype_id,e),u.oR.success("Transaction type updated successfully")):(await c.E.createTransactionType(e),u.oR.success("Transaction type created successfully")),b(),o(null),x()}catch(e){u.oR.error(a?"Failed to update transaction type":"Failed to create transaction type")}finally{y(!1)}},k=async e=>{try{await c.E.deleteTransactionType(e),u.oR.success("Transaction type deleted successfully"),b()}catch(e){u.oR.error("Failed to delete transaction type")}};return(0,s.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Transaction Types"}),(0,s.jsx)(l.$,{onClick:()=>{o(null),x()},variant:"outline",children:"Clear Form"})]}),(0,s.jsxs)("form",{onSubmit:g(f),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Name"}),(0,s.jsx)(d.p,{...m("name"),className:"dark:bg-gray-700",placeholder:"Enter transaction type name"}),v.name&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:v.name.message})]}),(0,s.jsx)(l.$,{type:"submit",disabled:h,className:"w-full md:w-auto",children:h?"Saving...":a?"Update":"Create"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Name"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Created At"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-b dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-2",children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,s.jsx)(l.$,{onClick:()=>o(e),variant:"outline",size:"sm",children:"Edit"}),(0,s.jsx)(l.$,{onClick:()=>{confirm("Are you sure you want to delete this transaction type?")&&k(e.transactiontype_id)},variant:"danger",size:"sm",children:"Delete"})]})})]},e.transactiontype_id))})]})})]})}},18346:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(23464);a(49509);let r="/api/postgrest";console.log("[PostgREST Client] Using baseURL: ".concat(r));let n=s.A.create({baseURL:r,headers:{Accept:"application/json","Content-Type":"application/json",Prefer:"return=representation"}});n.interceptors.response.use(e=>("get"!==e.config.method&&console.log("PostgREST Success:",{url:e.config.url,method:e.config.method,status:e.status,data:e.data}),e),e=>{var t,a,s,r,n,i,o,c;(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)!==409&&console.error("PostgREST Error:",{url:(null==e?void 0:null===(r=e.config)||void 0===r?void 0:r.url)||"unknown",method:(null==e?void 0:null===(n=e.config)||void 0===n?void 0:n.method)||"unknown",message:(null==e?void 0:e.message)||"No error message",status:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.status)||"unknown",statusText:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.statusText)||"unknown",data:(null==e?void 0:null===(c=e.response)||void 0===c?void 0:c.data)||null,code:(null==e?void 0:e.code)||"unknown"});let l=Error((null==e?void 0:e.message)||"Unknown error");return Object.assign(l,{status:(null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.status)||500,data:(null==e?void 0:null===(s=e.response)||void 0===s?void 0:s.data)||null,code:(null==e?void 0:e.code)||"UNKNOWN_ERROR",config:(null==e?void 0:e.config)||{}}),Promise.reject(l)});let i=n},18348:(e,t,a)=>{"use strict";a.d(t,{E:()=>r});var s=a(69894);class r extends s.d{static async getTransactionTypes(){return(await this.get(this.endpoint)).data}static async createTransactionType(e){return(await this.post(this.endpoint,e)).data}static async updateTransactionType(e,t){let a=this.buildFilter("transactiontype_id","eq",e);return(await this.patch("".concat(this.endpoint,"?").concat(a),t)).data}static async deleteTransactionType(e){let t=this.buildFilter("transactiontype_id","eq",e);return this.delete("".concat(this.endpoint,"?").concat(t))}}r.endpoint="/transaction_type"},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var s=a(95155),r=a(12115);let n=(0,a(74466).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-dark shadow-sm dark:bg-primary-dark dark:hover:bg-primary",outline:"border border-secondary-medium bg-white text-secondary-dark hover:bg-secondary-light dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",success:"bg-success text-white hover:bg-success/90 dark:bg-success/80 dark:hover:bg-success",danger:"bg-danger text-white hover:bg-danger/90 dark:bg-danger/80 dark:hover:bg-danger",ghost:"hover:bg-secondary-light text-secondary-dark dark:text-gray-300 dark:hover:bg-gray-800",link:"text-primary hover:text-primary-dark underline-offset-4 hover:underline dark:text-blue-400 dark:hover:text-blue-300"},size:{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-10 px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,...o}=e;return(0,s.jsx)("button",{className:n({variant:r,size:i,className:a}),ref:t,...o})});i.displayName="Button"},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>r});var s=a(95155);let r=a(12115).forwardRef((e,t)=>{let{...a}=e;return(0,s.jsx)("input",{ref:t,...a})});r.displayName="Input"},69562:(e,t,a)=>{Promise.resolve().then(a.bind(a,9715))},69894:(e,t,a)=>{"use strict";a.d(t,{d:()=>r});var s=a(18346);class r{static async get(e){return s.A.get(e)}static async post(e,t){try{return await s.A.post(e,t)}catch(t){throw 409!==t.status&&console.error("Error in POST request to ".concat(e,":"),t),t}}static async patch(e,t){return s.A.patch(e,t)}static async delete(e){return s.A.delete(e)}static buildFilter(e,t,a){return"".concat(e,"=").concat(t,".").concat(a)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[7285,6774,2177,1342,8441,1684,7358],()=>t(69562)),_N_E=e.O()}]);