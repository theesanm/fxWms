exports.id=8263,exports.ids=[8263],exports.modules={4780:(e,r,s)=>{"use strict";s.d(r,{cn:()=>a});var t=s(49384),n=s(82348);function a(...e){return(0,n.QP)((0,t.$)(e))}},29523:(e,r,s)=>{"use strict";s.d(r,{$:()=>o});var t=s(60687),n=s(43210);let a=(0,s(24224).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-dark shadow-sm dark:bg-primary-dark dark:hover:bg-primary",outline:"border border-secondary-medium bg-white text-secondary-dark hover:bg-secondary-light dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",success:"bg-success text-white hover:bg-success/90 dark:bg-success/80 dark:hover:bg-success",danger:"bg-danger text-white hover:bg-danger/90 dark:bg-danger/80 dark:hover:bg-danger",ghost:"hover:bg-secondary-light text-secondary-dark dark:text-gray-300 dark:hover:bg-gray-800",link:"text-primary hover:text-primary-dark underline-offset-4 hover:underline dark:text-blue-400 dark:hover:text-blue-300"},size:{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-10 px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef(({className:e,variant:r,size:s,...n},o)=>(0,t.jsx)("button",{className:a({variant:r,size:s,className:e}),ref:o,...n}));o.displayName="Button"},54629:(e,r,s)=>{Promise.resolve().then(s.bind(s,68208)),Promise.resolve().then(s.bind(s,96871))},55354:(e,r,s)=>{"use strict";s.d(r,{C:()=>a});var t=s(85665),n=s(59350);let a=(0,t.vt)()((0,n.Zr)(e=>({isDarkMode:!1,toggleDarkMode:()=>e(e=>({isDarkMode:!e.isDarkMode}))}),{name:"theme-storage"}))},57729:()=>{},60709:(e,r,s)=>{Promise.resolve().then(s.bind(s,62008)),Promise.resolve().then(s.bind(s,83701))},61135:()=>{},62008:(e,r,s)=>{"use strict";s.d(r,{Auth:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call Auth() from the server but Auth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\fxWMS\\React\\admin-portal\\src\\components\\auth.tsx","Auth")},66239:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,86346,23)),Promise.resolve().then(s.t.bind(s,27924,23)),Promise.resolve().then(s.t.bind(s,35656,23)),Promise.resolve().then(s.t.bind(s,40099,23)),Promise.resolve().then(s.t.bind(s,38243,23)),Promise.resolve().then(s.t.bind(s,28827,23)),Promise.resolve().then(s.t.bind(s,62763,23)),Promise.resolve().then(s.t.bind(s,97173,23))},68208:(e,r,s)=>{"use strict";s.d(r,{Auth:()=>P});var t=s(60687),n=s(85665),a=s(59350);let o=(0,n.vt)()((0,a.Zr)((e,r)=>({user:null,isLoading:!1,error:null,lastActivity:null,setUser:r=>e({user:r}),login:async(r,s)=>{e({isLoading:!0,error:null});try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s})});if(!t.ok){let e=await t.json();throw Error(e.error||"Authentication failed")}let n=await t.json();e({user:n.user,isLoading:!1,error:null,lastActivity:Date.now()})}catch(r){throw e({error:r.response?.data?.error||"Authentication failed",isLoading:!1,user:null,lastActivity:null}),r}},logout:()=>e({user:null,error:null,lastActivity:null}),updateActivity:()=>e({lastActivity:Date.now()})}),{name:"auth-storage"}));var i=s(43210);function l(){let[e,r]=(0,i.useState)(""),[s,n]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),{login:d,isLoading:c}=o(),h=async r=>{r.preventDefault(),l("");try{await d(e,s)}catch(e){l(e.response?.data?.error||e.message||"Login failed")}};return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-64px)]",children:(0,t.jsxs)("div",{className:"w-full max-w-md p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-gray-100",children:"Admin Portal"}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[a&&(0,t.jsx)("div",{className:"text-red-500 text-sm p-2 bg-red-50 dark:bg-red-900/20 rounded",children:a}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"email",value:e,onChange:e=>r(e.target.value),placeholder:"Email",className:"w-full p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100",required:!0})}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"password",value:s,onChange:e=>n(e.target.value),placeholder:"Password",className:"w-full p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100",required:!0})}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-primary hover:bg-primary-dark text-white p-2 rounded disabled:opacity-50",disabled:c,children:c?"Logging in...":"Login"})]})]})})}var d=s(97992),c=s(44381);let h={home:e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,t.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]}),admin:e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"})}),product:e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),(0,t.jsx)("polyline",{points:"3.29 7 12 12 20.71 7"}),(0,t.jsx)("line",{x1:"12",y1:"22",x2:"12",y2:"12"})]}),warehouse:e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M22.5 16.5h-21"}),(0,t.jsx)("path",{d:"M21 5H3"}),(0,t.jsx)("path",{d:"M18 2H6"}),(0,t.jsx)("path",{d:"M19.5 19.5h-15"}),(0,t.jsx)("path",{d:"M3 5v14.5"}),(0,t.jsx)("path",{d:"M21 5v14.5"}),(0,t.jsx)("path",{d:"M9 2v3"}),(0,t.jsx)("path",{d:"M15 2v3"})]}),zone:e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),(0,t.jsx)("path",{d:"M3 9h18"}),(0,t.jsx)("path",{d:"M3 15h18"}),(0,t.jsx)("path",{d:"M9 3v18"}),(0,t.jsx)("path",{d:"M15 3v18"})]}),users:e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,t.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,t.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),roles:e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,t.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,t.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),(0,t.jsx)("path",{d:"M19 12h2"}),(0,t.jsx)("path",{d:"M19 16h2"})]}),permissions:e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,t.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),chevronRight:e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("polyline",{points:"9 18 15 12 9 6"})}),chevronLeft:e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,t.jsx)("polyline",{points:"15 18 9 12 15 6"})}),mapPin:d.A,boxes:c.A};var u=s(4780),m=s(85814),x=s.n(m),g=s(16189);s(51215),s(94e3);var p=s(52581);function v({isCollapsed:e,onCollapse:r}){let s=(0,g.usePathname)(),[n,a]=(0,i.useState)([]),{user:l}=o(),[d,c]=(0,i.useState)(new Set),[m,p]=(0,i.useState)(null),v=e=>{switch(e){case"home":return(0,t.jsx)(h.home,{className:"h-5 w-5"});case"admin":return(0,t.jsx)(h.admin,{className:"h-5 w-5"});case"product":return(0,t.jsx)(h.product,{className:"h-5 w-5"});case"warehouse":return(0,t.jsx)(h.warehouse,{className:"h-5 w-5"});case"zone":return(0,t.jsx)(h.zone,{className:"h-5 w-5"});case"users":return(0,t.jsx)(h.users,{className:"h-5 w-5"});case"roles":return(0,t.jsx)(h.roles,{className:"h-5 w-5"});case"permissions":return(0,t.jsx)(h.permissions,{className:"h-5 w-5"});case"location":return(0,t.jsx)(h.mapPin,{className:"h-5 w-5"});case"inventory":return(0,t.jsx)(h.boxes,{className:"h-5 w-5"});default:return null}},j=e=>{c(r=>{let s=new Set(r);return s.has(e)?s.delete(e):s.add(e),s})},w=(r=null,a=0)=>n.filter(e=>e.parent_menu_id===r).sort((e,r)=>e.order_index-r.order_index).map(r=>{let o=n.some(e=>e.parent_menu_id===r.menu_id),i=d.has(r.menu_id),l=n.filter(e=>e.parent_menu_id===r.menu_id),c=v(r.icon),m=s===r.menu_url;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:(0,u.cn)("flex items-center px-3 py-2 rounded-md transition-colors",e?"justify-center":"",a>0&&!e&&"ml-4"),children:[o&&!e&&(0,t.jsx)("button",{onClick:()=>j(r.menu_id),className:"mr-2",children:(0,t.jsx)(h.chevronRight,{className:(0,u.cn)("h-4 w-4 transition-transform",i&&"transform rotate-90")})}),(0,t.jsx)(x(),{href:r.menu_url,className:(0,u.cn)("flex items-center flex-1",m?"text-primary":"text-gray-700 dark:text-gray-200 hover:text-primary dark:hover:text-primary"),onMouseEnter:s=>{e&&p({item:r,children:l,level:a,rect:s.currentTarget.getBoundingClientRect()})},onMouseLeave:e=>{let r=e.relatedTarget;r&&"closest"in r&&r.closest("[data-hover-menu]")||p(null)},children:(0,t.jsxs)("span",{className:(0,u.cn)("flex items-center w-full",e?"justify-center":""),children:[c&&(0,t.jsx)("span",{className:(0,u.cn)("inline-flex",!e&&"mr-2"),children:c}),(0,t.jsx)("span",{className:(0,u.cn)(e?"sr-only":"flex-1","whitespace-nowrap"),children:r.menu_name})]})})]}),!e&&o&&i&&(0,t.jsx)("div",{className:"ml-4 mt-1",children:w(r.menu_id,a+1)})]},r.menu_id)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("nav",{className:(0,u.cn)("h-screen transition-all duration-300","bg-white border-r border-secondary-medium","dark:bg-gray-800 dark:border-gray-700",e?"w-16":"w-64","relative"),children:[(0,t.jsx)("button",{onClick:()=>r(!e),className:"absolute -right-3 top-6 bg-white dark:bg-gray-800 border border-secondary-medium dark:border-gray-700 rounded-full p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700",children:e?(0,t.jsx)(h.chevronRight,{className:"h-4 w-4"}):(0,t.jsx)(h.chevronLeft,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:(0,u.cn)("space-y-1 overflow-y-auto","h-[calc(100vh-3rem)]","pt-8"),children:w(null)})]}),m&&e&&!1]})}var j=s(21134),w=s(363),y=s(29523),b=s(55354);function f(){let{isDarkMode:e,toggleDarkMode:r}=(0,b.C)();return(0,t.jsx)(y.$,{variant:"outline",size:"sm",onClick:r,className:"w-9 px-0",children:e?(0,t.jsx)(j.A,{className:"h-4 w-4"}):(0,t.jsx)(w.A,{className:"h-4 w-4"})})}var k=s(40083);function N({children:e}){let{user:r,logout:s}=o(),[n,a]=(0,i.useState)(!1);(0,i.useRef)(null),(0,i.useRef)(null);let[l,d]=(0,i.useState)("User"),c=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),s(),p.oR.success("Logged out successfully")}catch(e){p.oR.error("Failed to logout")}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex min-h-screen bg-secondary-light dark:bg-gray-900",children:[r&&(0,t.jsx)("div",{className:"fixed z-[100]",children:(0,t.jsx)(v,{isCollapsed:n,onCollapse:a})}),(0,t.jsxs)("main",{className:(0,u.cn)("flex-1 transition-all duration-300",r?n?"ml-16":"ml-64":""),children:[r&&(0,t.jsxs)("div",{children:[(0,t.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-secondary-medium dark:border-gray-700",children:(0,t.jsxs)("div",{className:"h-16 bg-white dark:bg-gray-800 px-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-full bg-primary text-white flex items-center justify-center text-sm font-medium",children:r.username?.[0]?.toUpperCase()||"U"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-secondary-dark dark:text-gray-200",children:r.username}),(0,t.jsx)("span",{className:"text-xs text-secondary dark:text-gray-400",children:l})]})]}),(0,t.jsx)("div",{className:"h-8 w-px bg-secondary-medium dark:bg-gray-700"}),(0,t.jsxs)(y.$,{variant:"ghost",size:"sm",onClick:c,className:"text-secondary hover:text-secondary-dark dark:text-gray-400 dark:hover:text-gray-200",children:[(0,t.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Sign out"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(f,{})})]})}),(0,t.jsx)("div",{className:"p-6",children:e})]}),!r&&e]})]}),(0,t.jsx)(p.l$,{})]})}function P({children:e}){let{user:r,isLoading:s}=o(),[n,a]=(0,i.useState)(!1);return n?r||s?(0,t.jsx)(N,{children:e}):(0,t.jsx)(N,{children:(0,t.jsx)(l,{})}):null}},83701:(e,r,s)=>{"use strict";s.d(r,{ThemeProvider:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\fxWMS\\React\\admin-portal\\src\\components\\theme-provider.tsx","ThemeProvider")},84391:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,16444,23)),Promise.resolve().then(s.t.bind(s,16042,23)),Promise.resolve().then(s.t.bind(s,88170,23)),Promise.resolve().then(s.t.bind(s,49477,23)),Promise.resolve().then(s.t.bind(s,29345,23)),Promise.resolve().then(s.t.bind(s,12089,23)),Promise.resolve().then(s.t.bind(s,46577,23)),Promise.resolve().then(s.t.bind(s,31307,23))},94e3:(e,r,s)=>{"use strict";s.d(r,{A:()=>o});var t=s(51060);let n=process.env.POSTGREST_URL||"http://localhost:3000";console.log(`[PostgREST Client] Using baseURL: ${n}`);let a=t.A.create({baseURL:n,headers:{Accept:"application/json","Content-Type":"application/json",Prefer:"return=representation"}});a.interceptors.response.use(e=>("get"!==e.config.method&&console.log("PostgREST Success:",{url:e.config.url,method:e.config.method,status:e.status,data:e.data}),e),e=>{e?.response?.status!==409&&console.error("PostgREST Error:",{url:e?.config?.url||"unknown",method:e?.config?.method||"unknown",message:e?.message||"No error message",status:e?.response?.status||"unknown",statusText:e?.response?.statusText||"unknown",data:e?.response?.data||null,code:e?.code||"unknown"});let r=Error(e?.message||"Unknown error");return Object.assign(r,{status:e?.response?.status||500,data:e?.response?.data||null,code:e?.code||"UNKNOWN_ERROR",config:e?.config||{}}),Promise.reject(r)});let o=a},94431:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h,metadata:()=>c});var t=s(37413),n=s(66476),a=s.n(n),o=s(8749),i=s.n(o);s(61135);var l=s(62008),d=s(83701);let c={title:"Admin Portal",description:"Administrative interface"};function h({children:e}){return(0,t.jsx)("html",{lang:"en",suppressHydrationWarning:!0,className:`${a().variable} ${i().variable}`,children:(0,t.jsx)("body",{className:"min-h-screen bg-secondary-light dark:bg-gray-900",children:(0,t.jsx)(d.ThemeProvider,{children:(0,t.jsx)(l.Auth,{children:e})})})})}},96871:(e,r,s)=>{"use strict";s.d(r,{ThemeProvider:()=>a});var t=s(60687),n=s(55354);function a({children:e}){let{isDarkMode:r}=(0,n.C)();return(0,t.jsx)(t.Fragment,{children:e})}s(43210)}};