(()=>{var e={};e.id=9318,e.ids=[9318],e.modules={3034:(e,t,a)=>{"use strict";a.d(t,{uB:()=>u,xL:()=>x,L$:()=>h,G7:()=>m,h_:()=>y});var s=a(60687),r=a(43210),n=a(70965),i=a(99270),o=a(4780),d=a(26134),c=a(11860);d.bL,d.l9;let l=d.ZL,p=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(d.hJ,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));p.displayName=d.hJ.displayName,r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(l,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)(d.UC,{ref:r,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),"aria-describedby":"dialog-description",...a,children:[t,(0,s.jsx)("span",{id:"dialog-description",className:"sr-only",children:"Dialog content"}),(0,s.jsxs)(d.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})).displayName=d.UC.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(d.hE,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t})).displayName=d.hE.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(d.VY,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",e),...t})).displayName=d.VY.displayName;let u=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.uB,{ref:a,className:(0,o.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));u.displayName=n.uB.displayName;let m=r.forwardRef(({className:e,...t},a)=>(0,s.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,s.jsx)(n.uB.Input,{ref:a,className:(0,o.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));m.displayName=n.uB.Input.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.uB.List,{ref:a,className:(0,o.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t})).displayName=n.uB.List.displayName;let x=r.forwardRef((e,t)=>(0,s.jsx)(n.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));x.displayName=n.uB.Empty.displayName;let h=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.uB.Group,{ref:a,className:(0,o.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));h.displayName=n.uB.Group.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.uB.Separator,{ref:a,className:(0,o.cn)("-mx-1 h-px bg-border",e),...t})).displayName=n.uB.Separator.displayName;let y=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.uB.Item,{ref:a,className:(0,o.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));y.displayName=n.uB.Item.displayName},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19613:(e,t,a)=>{"use strict";a.d(t,{default:()=>v});var s=a(60687),r=a(43210),n=a(27605),i=a(63442),o=a(45880),d=a(29523),c=a(89667),l=a(52581),p=a(81288);class u extends p.d{static{this.endpoint="/inventory_transactions"}static async getInventoryTransactions(){return(await this.get(this.endpoint)).data}static async createInventoryTransaction(e){return(await this.post(this.endpoint,e)).data}static async updateInventoryTransaction(e,t){let a=this.buildFilter("transaction_id","eq",e);return(await this.patch(`${this.endpoint}?${a}`,t)).data}static async deleteInventoryTransaction(e){let t=this.buildFilter("transaction_id","eq",e);await this.delete(`${this.endpoint}?${t}`)}}var m=a(3034),x=a(40988),h=a(17971),y=a(13964),f=a(4780);a(27123),a(52322);let g=o.Ik({inventory_id:o.Yj().min(1,"Inventory ID is required"),transaction_type:o.Yj().min(1,"Transaction type is required"),quantity_change:o.Yj().min(1,"Quantity change is required").refine(e=>!isNaN(parseInt(e)),{message:"Quantity must be a number"}),reference_id:o.Yj().min(1,"Reference ID is required"),notes:o.Yj().optional()});function v(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(null),[p,v]=(0,r.useState)(!1),[j,b]=(0,r.useState)([]),[N,_]=(0,r.useState)([]),[w,k]=(0,r.useState)(!1),[q,I]=(0,r.useState)(!1),{register:S,handleSubmit:R,reset:C,setValue:T,watch:$,formState:{errors:P}}=(0,n.mN)({resolver:(0,i.u)(g)}),A=$("inventory_id"),B=$("transaction_type"),E=async()=>{try{let e=await u.getInventoryTransactions();t(e)}catch(e){l.oR.error("Failed to load transactions")}},z=async e=>{v(!0);try{let t={inventory_id:parseInt(e.inventory_id),transaction_type:e.transaction_type,quantity_change:parseInt(e.quantity_change),reference_id:e.reference_id,notes:e.notes||""};a?(await u.updateInventoryTransaction(a.transaction_id,t),l.oR.success("Transaction updated successfully")):(await u.createInventoryTransaction(t),l.oR.success("Transaction created successfully")),E(),o(null),C()}catch(e){l.oR.error(a?"Failed to update transaction":"Failed to create transaction")}finally{v(!1)}},L=e=>{o(e),T("inventory_id",e.inventory_id.toString()),T("transaction_type",e.transaction_type),T("quantity_change",e.quantity_change.toString()),T("reference_id",e.reference_id),T("notes",e.notes||"")},M=async e=>{try{await u.deleteInventoryTransaction(e),l.oR.success("Transaction deleted successfully"),E()}catch(e){l.oR.error("Failed to delete transaction")}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("form",{onSubmit:R(z),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Inventory"}),(0,s.jsxs)(x.AM,{open:w,onOpenChange:k,children:[(0,s.jsx)(x.Wv,{asChild:!0,children:(0,s.jsxs)(d.$,{variant:"outline",role:"combobox","aria-expanded":w,className:"w-full justify-between",children:[A&&j.find(e=>e.inventory_id?.toString()===A)?.product_id||"Select inventory...",(0,s.jsx)(h.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(x.hl,{className:"w-full p-0",children:(0,s.jsxs)(m.uB,{children:[(0,s.jsx)(m.G7,{placeholder:"Search inventory..."}),(0,s.jsx)(m.xL,{children:"No inventory found."}),(0,s.jsx)(m.L$,{children:j.map(e=>(0,s.jsxs)(m.h_,{onSelect:()=>{T("inventory_id",e.inventory_id?.toString()||""),k(!1)},children:[(0,s.jsx)(y.A,{className:(0,f.cn)("mr-2 h-4 w-4",A===e.inventory_id?.toString()?"opacity-100":"opacity-0")}),e.product_id," - Qty: ",e.quantity_on_hand]},e.inventory_id))})]})})]}),P.inventory_id&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:P.inventory_id.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Transaction Type"}),(0,s.jsxs)(x.AM,{open:q,onOpenChange:I,children:[(0,s.jsx)(x.Wv,{asChild:!0,children:(0,s.jsxs)(d.$,{variant:"outline",role:"combobox","aria-expanded":q,className:"w-full justify-between",children:[B||"Select transaction type...",(0,s.jsx)(h.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(x.hl,{className:"w-full p-0",children:(0,s.jsxs)(m.uB,{children:[(0,s.jsx)(m.G7,{placeholder:"Search transaction type..."}),(0,s.jsx)(m.xL,{children:"No transaction type found."}),(0,s.jsx)(m.L$,{children:N.map(e=>(0,s.jsxs)(m.h_,{onSelect:()=>{T("transaction_type",e.name),I(!1)},children:[(0,s.jsx)(y.A,{className:(0,f.cn)("mr-2 h-4 w-4",B===e.name?"opacity-100":"opacity-0")}),e.name]},e.transactiontype_id))})]})})]}),P.transaction_type&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:P.transaction_type.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Quantity Change"}),(0,s.jsx)(c.p,{...S("quantity_change"),className:"dark:bg-gray-700",placeholder:"Enter quantity change",type:"number"}),P.quantity_change&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:P.quantity_change.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Reference ID"}),(0,s.jsx)(c.p,{...S("reference_id"),className:"dark:bg-gray-700",placeholder:"Enter reference ID"}),P.reference_id&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:P.reference_id.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 dark:text-gray-200",children:"Notes"}),(0,s.jsx)(c.p,{...S("notes"),className:"dark:bg-gray-700",placeholder:"Enter notes"}),P.notes&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:P.notes.message})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(d.$,{type:"submit",disabled:p,className:"w-full md:w-auto",children:p?"Saving...":a?"Update":"Create"}),a&&(0,s.jsx)(d.$,{type:"button",variant:"outline",onClick:()=>{o(null),C()},children:"Cancel"})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"ID"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Inventory ID"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Type"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Quantity"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Reference"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-2 text-center",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-b dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)("td",{className:"px-4 py-2",children:e.transaction_id}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.inventory_id}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.transaction_type}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.quantity_change}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.reference_id}),(0,s.jsx)("td",{className:"px-4 py-2",children:new Date(e.transaction_date).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,s.jsx)(d.$,{onClick:()=>L(e),variant:"outline",size:"sm",children:"Edit"}),(0,s.jsx)(d.$,{onClick:()=>M(e.transaction_id),variant:"danger",size:"sm",children:"Delete"})]})})]},e.transaction_id))})]})})]})}},27123:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});var s=a(81288);class r extends s.d{static{this.endpoint="/inventory"}static async getInventory(){return(await this.get(this.endpoint)).data}static async updateInventory(e,t){let a=this.buildFilter("inventory_id","eq",e);return(await this.patch(`${this.endpoint}?${a}`,t)).data}static async createInventory(e){return(await this.post(this.endpoint,e)).data}static async deleteInventory(e){let t=this.buildFilter("inventory_id","eq",e);await this.delete(`${this.endpoint}?${t}`)}}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32413:(e,t,a)=>{Promise.resolve().then(a.bind(a,89420))},33873:e=>{"use strict";e.exports=require("path")},40988:(e,t,a)=>{"use strict";a.d(t,{AM:()=>o,Wv:()=>d,hl:()=>c});var s=a(60687),r=a(43210),n=a(40599),i=a(4780);let o=n.bL,d=n.l9,c=r.forwardRef(({className:e,align:t="center",sideOffset:a=4,...r},o)=>(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:o,align:t,sideOffset:a,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));c.displayName=n.UC.displayName},44029:(e,t,a)=>{Promise.resolve().then(a.bind(a,19613))},46832:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(37413),r=a(89420);function n(){return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Inventory Transactions"})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,s.jsx)(r.default,{})})]})}},52322:(e,t,a)=>{"use strict";a.d(t,{E:()=>r});var s=a(81288);class r extends s.d{static{this.endpoint="/transaction_type"}static async getTransactionTypes(){return(await this.get(this.endpoint)).data}static async createTransactionType(e){return(await this.post(this.endpoint,e)).data}static async updateTransactionType(e,t){let a=this.buildFilter("transactiontype_id","eq",e);return(await this.patch(`${this.endpoint}?${a}`,t)).data}static async deleteTransactionType(e){let t=this.buildFilter("transactiontype_id","eq",e);return this.delete(`${this.endpoint}?${t}`)}}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},72676:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>l,routeModule:()=>u,tree:()=>c});var s=a(65239),r=a(48088),n=a(88170),i=a.n(n),o=a(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);a.d(t,d);let c={children:["",{children:["inventory",{children:["transaction",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,46832)),"C:\\Projects\\fxWMS\\React\\admin-portal\\src\\app\\inventory\\transaction\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"C:\\Projects\\fxWMS\\React\\admin-portal\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["C:\\Projects\\fxWMS\\React\\admin-portal\\src\\app\\inventory\\transaction\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/inventory/transaction/page",pathname:"/inventory/transaction",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81288:(e,t,a)=>{"use strict";a.d(t,{d:()=>r});var s=a(94e3);class r{static async get(e){return s.A.get(e)}static async post(e,t){try{return await s.A.post(e,t)}catch(t){throw 409!==t.status&&console.error(`Error in POST request to ${e}:`,t),t}}static async patch(e,t){return s.A.patch(e,t)}static async delete(e){return s.A.delete(e)}static buildFilter(e,t,a){return`${e}=${t}.${a}`}}},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},89420:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Projects\\\\fxWMS\\\\React\\\\admin-portal\\\\src\\\\components\\\\inventory\\\\inventory-transaction-manager.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Projects\\fxWMS\\React\\admin-portal\\src\\components\\inventory\\inventory-transaction-manager.tsx","default")},89667:(e,t,a)=>{"use strict";a.d(t,{p:()=>r});var s=a(60687);let r=a(43210).forwardRef(({...e},t)=>(0,s.jsx)("input",{ref:t,...e}));r.displayName="Input"},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[4447,8273,1658,7605,2095,2105,2685,8263],()=>a(72676));module.exports=s})();